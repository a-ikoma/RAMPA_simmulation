@echo off

setlocal enabledelayedexpansion


set "graph[0]=graph1"
set "graph[1]=graph2"
set "graph[2]=graph3"
set "graph[3]=graph4"

set "stage[0]=3-4-2-4-9-5"
set "stage[1]=3-4-2-4-9-4"
set "stage[2]=3-4-2-4-8-5"
set "stage[3]=3-4-2-4-8-4"
set "stage[4]=3-4-2-4-7-5"
set "stage[5]=3-4-2-4-7-4"
set "stage[6]=3-4-2-4-6-5"
set "stage[7]=3-4-2-4-6-4"
set "stage[8]=3-4-2-3-9-5"
set "stage[9]=3-4-2-3-9-4"
set "stage[10]=3-4-2-3-8-5"
set "stage[11]=3-4-2-3-8-4"
set "stage[12]=3-4-2-3-7-5"
set "stage[13]=3-4-2-3-7-4"
set "stage[14]=3-4-2-3-6-5"
set "stage[15]=3-4-2-3-6-4"
set "stage[16]=3-4-2-2-9-5"
set "stage[17]=3-4-2-2-9-4"
set "stage[18]=3-4-2-2-8-5"
set "stage[19]=3-4-2-2-8-4"
set "stage[20]=3-4-2-2-7-5"
set "stage[21]=3-4-2-2-7-4"
set "stage[22]=3-4-2-2-6-5"
set "stage[23]=3-4-2-2-6-4"
set "stage[24]=3-4-1-4-9-5"
set "stage[25]=3-4-1-4-9-4"
set "stage[26]=3-4-1-4-8-5"
set "stage[27]=3-4-1-4-8-4"
set "stage[28]=3-4-1-4-7-5"
set "stage[29]=3-4-1-4-7-4"
set "stage[30]=3-4-1-4-6-5"
set "stage[31]=3-4-1-4-6-4"
set "stage[32]=3-4-1-3-9-5"
set "stage[33]=3-4-1-3-9-4"
set "stage[34]=3-4-1-3-8-5"
set "stage[35]=3-4-1-3-8-4"
set "stage[36]=3-4-1-3-7-5"
set "stage[37]=3-4-1-3-7-4"
set "stage[38]=3-4-1-3-6-5"
set "stage[39]=3-4-1-3-6-4"
set "stage[40]=3-4-1-2-9-5"
set "stage[41]=3-4-1-2-9-4"
set "stage[42]=3-4-1-2-8-5"
set "stage[43]=3-4-1-2-8-4"
set "stage[44]=3-4-1-2-7-5"
set "stage[45]=3-4-1-2-7-4"
set "stage[46]=3-4-1-2-6-5"
set "stage[47]=3-4-1-2-6-4"
set "stage[48]=3-3-2-4-9-5"
set "stage[49]=3-3-2-4-9-4"
set "stage[50]=3-3-2-4-8-5"
set "stage[51]=3-3-2-4-8-4"
set "stage[52]=3-3-2-4-7-5"
set "stage[53]=3-3-2-4-7-4"
set "stage[54]=3-3-2-4-6-5"
set "stage[55]=3-3-2-4-6-4"
set "stage[56]=3-3-2-3-9-5"
set "stage[57]=3-3-2-3-9-4"
set "stage[58]=3-3-2-3-8-5"
set "stage[59]=3-3-2-3-8-4"
set "stage[60]=3-3-2-3-7-5"
set "stage[61]=3-3-2-3-7-4"
set "stage[62]=3-3-2-3-6-5"
set "stage[63]=3-3-2-3-6-4"
set "stage[64]=3-3-2-2-9-5"
set "stage[65]=3-3-2-2-9-4"
set "stage[66]=3-3-2-2-8-5"
set "stage[67]=3-3-2-2-8-4"
set "stage[68]=3-3-2-2-7-5"
set "stage[69]=3-3-2-2-7-4"
set "stage[70]=3-3-2-2-6-5"
set "stage[71]=3-3-2-2-6-4"
set "stage[72]=3-3-1-4-9-5"
set "stage[73]=3-3-1-4-9-4"
set "stage[74]=3-3-1-4-8-5"
set "stage[75]=3-3-1-4-8-4"
set "stage[76]=3-3-1-4-7-5"
set "stage[77]=3-3-1-4-7-4"
set "stage[78]=3-3-1-4-6-5"
set "stage[79]=3-3-1-4-6-4"
set "stage[80]=3-3-1-3-9-5"
set "stage[81]=3-3-1-3-9-4"
set "stage[82]=3-3-1-3-8-5"
set "stage[83]=3-3-1-3-8-4"
set "stage[84]=3-3-1-3-7-5"
set "stage[85]=3-3-1-3-7-4"
set "stage[86]=3-3-1-3-6-5"
set "stage[87]=3-3-1-3-6-4"
set "stage[88]=3-3-1-2-9-5"
set "stage[89]=3-3-1-2-9-4"
set "stage[90]=3-3-1-2-8-5"
set "stage[91]=3-3-1-2-8-4"
set "stage[92]=3-3-1-2-7-5"
set "stage[93]=3-3-1-2-7-4"
set "stage[94]=3-3-1-2-6-5"
set "stage[95]=3-3-1-2-6-4"
set "stage[96]=3-2-2-4-9-5"
set "stage[97]=3-2-2-4-9-4"
set "stage[98]=3-2-2-4-8-5"
set "stage[99]=3-2-2-4-8-4"
set "stage[100]=3-2-2-4-7-5"
set "stage[101]=3-2-2-4-7-4"
set "stage[102]=3-2-2-4-6-5"
set "stage[103]=3-2-2-4-6-4"
set "stage[104]=3-2-2-3-9-5"
set "stage[105]=3-2-2-3-9-4"
set "stage[106]=3-2-2-3-8-5"
set "stage[107]=3-2-2-3-8-4"
set "stage[108]=3-2-2-3-7-5"
set "stage[109]=3-2-2-3-7-4"
set "stage[110]=3-2-2-3-6-5"
set "stage[111]=3-2-2-3-6-4"
set "stage[112]=3-2-2-2-9-5"
set "stage[113]=3-2-2-2-9-4"
set "stage[114]=3-2-2-2-8-5"
set "stage[115]=3-2-2-2-8-4"
set "stage[116]=3-2-2-2-7-5"
set "stage[117]=3-2-2-2-7-4"
set "stage[118]=3-2-2-2-6-5"
set "stage[119]=3-2-2-2-6-4"
set "stage[120]=3-2-1-4-9-5"
set "stage[121]=3-2-1-4-9-4"
set "stage[122]=3-2-1-4-8-5"
set "stage[123]=3-2-1-4-8-4"
set "stage[124]=3-2-1-4-7-5"
set "stage[125]=3-2-1-4-7-4"
set "stage[126]=3-2-1-4-6-5"
set "stage[127]=3-2-1-4-6-4"
set "stage[128]=3-2-1-3-9-5"
set "stage[129]=3-2-1-3-9-4"
set "stage[130]=3-2-1-3-8-5"
set "stage[131]=3-2-1-3-8-4"
set "stage[132]=3-2-1-3-7-5"
set "stage[133]=3-2-1-3-7-4"
set "stage[134]=3-2-1-3-6-5"
set "stage[135]=3-2-1-3-6-4"
set "stage[136]=3-2-1-2-9-5"
set "stage[137]=3-2-1-2-9-4"
set "stage[138]=3-2-1-2-8-5"
set "stage[139]=3-2-1-2-8-4"
set "stage[140]=3-2-1-2-7-5"
set "stage[141]=3-2-1-2-7-4"
set "stage[142]=3-2-1-2-6-5"
set "stage[143]=3-2-1-2-6-4"
set "stage[144]=2-4-2-4-9-5"
set "stage[145]=2-4-2-4-9-4"
set "stage[146]=2-4-2-4-8-5"
set "stage[147]=2-4-2-4-8-4"
set "stage[148]=2-4-2-4-7-5"
set "stage[149]=2-4-2-4-7-4"
set "stage[150]=2-4-2-4-6-5"
set "stage[151]=2-4-2-4-6-4"
set "stage[152]=2-4-2-3-9-5"
set "stage[153]=2-4-2-3-9-4"
set "stage[154]=2-4-2-3-8-5"
set "stage[155]=2-4-2-3-8-4"
set "stage[156]=2-4-2-3-7-5"
set "stage[157]=2-4-2-3-7-4"
set "stage[158]=2-4-2-3-6-5"
set "stage[159]=2-4-2-3-6-4"
set "stage[160]=2-4-2-2-9-5"
set "stage[161]=2-4-2-2-9-4"
set "stage[162]=2-4-2-2-8-5"
set "stage[163]=2-4-2-2-8-4"
set "stage[164]=2-4-2-2-7-5"
set "stage[165]=2-4-2-2-7-4"
set "stage[166]=2-4-2-2-6-5"
set "stage[167]=2-4-2-2-6-4"
set "stage[168]=2-4-1-4-9-5"
set "stage[169]=2-4-1-4-9-4"
set "stage[170]=2-4-1-4-8-5"
set "stage[171]=2-4-1-4-8-4"
set "stage[172]=2-4-1-4-7-5"
set "stage[173]=2-4-1-4-7-4"
set "stage[174]=2-4-1-4-6-5"
set "stage[175]=2-4-1-4-6-4"
set "stage[176]=2-4-1-3-9-5"
set "stage[177]=2-4-1-3-9-4"
set "stage[178]=2-4-1-3-8-5"
set "stage[179]=2-4-1-3-8-4"
set "stage[180]=2-4-1-3-7-5"
set "stage[181]=2-4-1-3-7-4"
set "stage[182]=2-4-1-3-6-5"
set "stage[183]=2-4-1-3-6-4"
set "stage[184]=2-4-1-2-9-5"
set "stage[185]=2-4-1-2-9-4"
set "stage[186]=2-4-1-2-8-5"
set "stage[187]=2-4-1-2-8-4"
set "stage[188]=2-4-1-2-7-5"
set "stage[189]=2-4-1-2-7-4"
set "stage[190]=2-4-1-2-6-5"
set "stage[191]=2-4-1-2-6-4"
set "stage[192]=2-3-2-4-9-5"
set "stage[193]=2-3-2-4-9-4"
set "stage[194]=2-3-2-4-8-5"
set "stage[195]=2-3-2-4-8-4"
set "stage[196]=2-3-2-4-7-5"
set "stage[197]=2-3-2-4-7-4"
set "stage[198]=2-3-2-4-6-5"
set "stage[199]=2-3-2-4-6-4"
set "stage[200]=2-3-2-3-9-5"
set "stage[201]=2-3-2-3-9-4"
set "stage[202]=2-3-2-3-8-5"
set "stage[203]=2-3-2-3-8-4"
set "stage[204]=2-3-2-3-7-5"
set "stage[205]=2-3-2-3-7-4"
set "stage[206]=2-3-2-3-6-5"
set "stage[207]=2-3-2-3-6-4"
set "stage[208]=2-3-2-2-9-5"
set "stage[209]=2-3-2-2-9-4"
set "stage[210]=2-3-2-2-8-5"
set "stage[211]=2-3-2-2-8-4"
set "stage[212]=2-3-2-2-7-5"
set "stage[213]=2-3-2-2-7-4"
set "stage[214]=2-3-2-2-6-5"
set "stage[215]=2-3-2-2-6-4"
set "stage[216]=2-3-1-4-9-5"
set "stage[217]=2-3-1-4-9-4"
set "stage[218]=2-3-1-4-8-5"
set "stage[219]=2-3-1-4-8-4"
set "stage[220]=2-3-1-4-7-5"
set "stage[221]=2-3-1-4-7-4"
set "stage[222]=2-3-1-4-6-5"
set "stage[223]=2-3-1-4-6-4"
set "stage[224]=2-3-1-3-9-5"
set "stage[225]=2-3-1-3-9-4"
set "stage[226]=2-3-1-3-8-5"
set "stage[227]=2-3-1-3-8-4"
set "stage[228]=2-3-1-3-7-5"
set "stage[229]=2-3-1-3-7-4"
set "stage[230]=2-3-1-3-6-5"
set "stage[231]=2-3-1-3-6-4"
set "stage[232]=2-3-1-2-9-5"
set "stage[233]=2-3-1-2-9-4"
set "stage[234]=2-3-1-2-8-5"
set "stage[235]=2-3-1-2-8-4"
set "stage[236]=2-3-1-2-7-5"
set "stage[237]=2-3-1-2-7-4"
set "stage[238]=2-3-1-2-6-5"
set "stage[239]=2-3-1-2-6-4"
set "stage[240]=2-2-2-4-9-5"
set "stage[241]=2-2-2-4-9-4"
set "stage[242]=2-2-2-4-8-5"
set "stage[243]=2-2-2-4-8-4"
set "stage[244]=2-2-2-4-7-5"
set "stage[245]=2-2-2-4-7-4"
set "stage[246]=2-2-2-4-6-5"
set "stage[247]=2-2-2-4-6-4"
set "stage[248]=2-2-2-3-9-5"
set "stage[249]=2-2-2-3-9-4"
set "stage[250]=2-2-2-3-8-5"
set "stage[251]=2-2-2-3-8-4"
set "stage[252]=2-2-2-3-7-5"
set "stage[253]=2-2-2-3-7-4"
set "stage[254]=2-2-2-3-6-5"
set "stage[255]=2-2-2-3-6-4"
set "stage[256]=2-2-2-2-9-5"
set "stage[257]=2-2-2-2-9-4"
set "stage[258]=2-2-2-2-8-5"
set "stage[259]=2-2-2-2-8-4"
set "stage[260]=2-2-2-2-7-5"
set "stage[261]=2-2-2-2-7-4"
set "stage[262]=2-2-2-2-6-5"
set "stage[263]=2-2-2-2-6-4"
set "stage[264]=2-2-1-4-9-5"
set "stage[265]=2-2-1-4-9-4"
set "stage[266]=2-2-1-4-8-5"
set "stage[267]=2-2-1-4-8-4"
set "stage[268]=2-2-1-4-7-5"
set "stage[269]=2-2-1-4-7-4"
set "stage[270]=2-2-1-4-6-5"
set "stage[271]=2-2-1-4-6-4"
set "stage[272]=2-2-1-3-9-5"
set "stage[273]=2-2-1-3-9-4"
set "stage[274]=2-2-1-3-8-5"
set "stage[275]=2-2-1-3-8-4"
set "stage[276]=2-2-1-3-7-5"
set "stage[277]=2-2-1-3-7-4"
set "stage[278]=2-2-1-3-6-5"
set "stage[279]=2-2-1-3-6-4"
set "stage[280]=2-2-1-2-9-5"
set "stage[281]=2-2-1-2-9-4"
set "stage[282]=2-2-1-2-8-5"
set "stage[283]=2-2-1-2-8-4"
set "stage[284]=2-2-1-2-7-5"
set "stage[285]=2-2-1-2-7-4"
set "stage[286]=2-2-1-2-6-5"
set "stage[287]=2-2-1-2-6-4"


set "case[0]=case1"
set "case[1]=case2"
set "case[2]=case3"
set "case[3]=case4"


for /l %%g in (0,1,3) do (
  copy .\graphs\!graph[%%g]!.txt .\graph.txt
  mkdir result_!graph[%%g]!

for /l %%c in (0,1,3) do (

  mkdir result_!graph[%%g]!\!case[%%c]!
  mkdir result_!graph[%%g]!\!case[%%c]!\result
  mkdir result_!graph[%%g]!\!case[%%c]!\link
  mkdir result_!graph[%%g]!\!case[%%c]!\lightpath
  mkdir result_!graph[%%g]!\!case[%%c]!\residual

for /l %%r in (1,1,2) do (
  copy .\allocs\!case[%%c]!\allocSeq%%r.txt .\allocSeq.txt
for /l %%p in (1,1,1) do (
for /l %%s in (0,1,287) do (
  copy .\params\param%%p_!stage[%%s]!.txt .\param.txt

  call .\ConsoleApplication1.exe

  move "utility_teian_.csv" "result_!graph[%%g]!\!case[%%c]!\result\result_pol%%p_!stage[%%s]!_seq%%r.csv"
  move "residual_.csv" "result_!graph[%%g]!\!case[%%c]!\residual\residual_pol%%p_!stage[%%s]!_seq%%r.csv"
  move "link_.csv" "result_!graph[%%g]!\!case[%%c]!\link\link_pol%%p_!stage[%%s]!_seq%%r.csv"
  move "lightPath_.csv" "result_!graph[%%g]!\!case[%%c]!\lightpath\lightPath_pol%%p_!stage[%%s]!_seq%%r.csv"

)
)
)
)
)




copy .\params\param0.txt .\param.txt
for /l %%g in (0,1,3) do (
  copy .\graphs\!graph[%%g]!.txt .\graph.txt
for /l %%c in (0,1,3) do (
for /l %%r in (1,1,2) do (
  copy .\allocs\!case[%%c]!\allocSeq%%r.txt .\allocSeq.txt

  call .\ConsoleApplication1.exe

  move "utility_teian_.csv" "result_!graph[%%g]!\!case[%%c]!\result\result_pol0_seq%%r.csv"
  move "residual_.csv" "result_!graph[%%g]!\!case[%%c]!\residual\residual_pol0_seq%%r.csv"
  move "link_.csv" "result_!graph[%%g]!\!case[%%c]!\link\link_pol0_seq%%r.csv"
  move "lightPath_.csv" "result_!graph[%%g]!\!case[%%c]!\lightpath\lightPath_pol0_seq%%r.csv"
)
)
)



pause